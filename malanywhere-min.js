MALAnywhere=function(){function t(t,e,n,i){$.ajax({url:"https://myanimelist.net/api/account/verify_credentials.xml",error:n,username:encodeURIComponent(t),password:encodeURIComponent(e),success:i})}function e(t,e,n,i){t({code:d.INVALID_CREDENTIALS,jqXHR:e,textStatus:n,errorThrown:i})}function n(t,e,n,i){var s=$(i),a=t.find("id").text(),r={text:function(){return-1}};s.find("series_animedb_id:contains("+a+")").filter(function(){$(this).text()===a&&(r=$(this))});var o={id:t.find("id").text(),title:t.find("title").text(),english:t.find("english").text(),synonyms:t.find("synonyms").text(),matched_title:e,type:t.find("type").text(),episodes:t.find("episodes").text(),score:t.find("score").text(),status:t.find("status").text(),start_date:t.find("start_date").text(),end_date:t.find("end_date").text(),synopsis:t.find("synopsis").text(),image:t.find("image").text()};-1!=r.text()?(r=r.parent(),n({code:d.FOUND_AND_ON_USER_LIST,userValues:{watched_episodes:r.find("my_watched_episodes").text(),start_date:r.find("my_start_date").text(),finish_date:r.find("my_finish_date").text(),score:r.find("my_score").text(),status:r.find("my_status").text(),rewatching:r.find("my_rewatching").text(),rewatching_episodes:r.find("my_rewatching_ep").text(),tags:r.find("my_tags").text()},animeInfo:o})):n({code:d.FOUND_BUT_NOT_ON_USER_LIST,animeInfo:o})}function i(t,e,i,s){for(var a=-1,f="",c=0;c<s.length;c++)for(var _=$(s[c]).find("entry"),l=0;l<_.length;l++)_.each(function(){if($(this).find("title").text().toLowerCase()==t[c].toLowerCase())return a=$(this),f=$(this).find("title").text(),c=s.length,l=_.length,!1;if($(this).find("english").text().toLowerCase()==t[c].toLowerCase())return f=$(this).find("english").text(),a=$(this),c=s.length,l=_.length,!1;for(var e=$(this).find("synonyms").text().split(", "),n=0;n<e.length;n++)if(e[n].toLowerCase()==t[c].toLowerCase()){a=$(this),f=e[n],c=s.length,l=_.length;break}});if(-1!=a){var h=o(n,a,f,i);$.ajax({url:"https://myanimelist.net/malappinfo.php",data:{u:encodeURIComponent(e),status:"all",type:"anime"},success:h,error:r,dataType:"xml"})}else i({code:d.NO_SEARCH_RESULTS})}function s(t,e,n,s){for(var a=t.length,d=0,f=[],c=o(function(t,e,n,s){f.push(s),++d==a&&i(t,e,n,f)},t,e,s),_=0;_<t.length;_++)$.ajax({url:"https://myanimelist.net/api/anime/search.xml",data:{q:t[_]},success:c,error:r,dataType:"xml",async:!1,username:encodeURIComponent(e),password:encodeURIComponent(n)})}function a(n,i,a,d){r=o(r,d),t(i,a,o(e,d),o(s,n,i,a,d))}function r(t,e,n,i){alert(t),t({code:d.AJAX_ERROR,jqXHR:e,textStatus:n,errorThrown:i})}function o(t){var e=Array.prototype.slice,n=e.call(arguments,1);return function(){return t.apply(this,n.concat(e.call(arguments,0)))}}var d={AJAX_ERROR:-3,INVALID_CREDENTIALS:-2,NO_SEARCH_RESULTS:-1,FOUND_BUT_NOT_ON_USER_LIST:0,FOUND_AND_ON_USER_LIST:1};return{CODES:d,verifyCredentials:t,getAnimeInfo:a}}();